(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{174:function(e,t,a){},179:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),c=a.n(l),o=a(13),s=a(19),u=a.n(s),i="http://localhost:8080/api/",m=function(e,t,a){return u.a.post(i+"signup",{username:e,email:t,password:a})},E=function(e,t){return u.a.post(i+"login",{email:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},d=a(65),p=Object(d.a)(),g=a(7);var b=function(e){var t=Object(n.useState)(0),a=Object(g.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),s=Object(g.a)(o,2),u=s[0],i=s[1];return r.a.createElement("div",null,r.a.createElement("p",null,"I'm introducing you to ",r.a.createElement("strong",null,e.name)," ",r.a.createElement("i",null," ",u," ")),r.a.createElement("p",null,"Likes :  ",l," "),r.a.createElement("button",{onClick:function(){return c(l+1)}},"Like"),r.a.createElement("button",{onClick:function(){return i("Reported. Thank you chief")}},"Report"))};var f=function(){return r.a.createElement("div",null,r.a.createElement("strong",null,"This is our Dev Team."),["Albert C.","Hector A.","Oriol A.","Ruben B.","Samu R.","Daniel R."].map((function(e){return r.a.createElement(b,{name:e,key:e})})))},v=a(5),h=a(8),S=a(24),O=a.n(S),y=a(16),j=a.n(y),N=a(25),C=a.n(N),w=a(26),L=(a(35),function(e){if(!Object(w.isEmail)(e))return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This is not a valid email.")}),I=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},R=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),l=Object(n.useState)(""),c=Object(g.a)(l,2),s=c[0],u=c[1],i=Object(n.useState)(""),m=Object(g.a)(i,2),d=m[0],p=m[1],b=Object(n.useState)(!1),f=Object(g.a)(b,2),S=f[0],y=f[1],N=Object(o.c)((function(e){return e.auth})).isLoggedIn,w=Object(o.c)((function(e){return e.message})).message,R=Object(o.b)();return N?r.a.createElement(v.a,{to:"/profile"}):r.a.createElement("section",{className:"login"},r.a.createElement("div",{className:"loginContainer"},r.a.createElement(O.a,{onSubmit:function(n){n.preventDefault(),y(!0),t.current.validateAll(),0===a.current.context._errors.length?R(function(e,t){return function(a){return E(e,t).then((function(e){return a({type:"LOGIN_SUCCESS",payload:{user:e}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return a({type:"LOGIN_FAIL"}),a({type:"SET_MESSAGE",payload:t}),Promise.reject()}))}}(s,d)).then((function(){e.history.push("/profile"),window.location.reload()})).catch((function(){y(!1)})):y(!1)},ref:t},r.a.createElement("label",null,"E-mail"),r.a.createElement(j.a,{type:"text",autoFocus:!0,required:!0,name:"email",value:s,onChange:function(e){var t=e.target.value;u(t)},validations:[I,L]}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("label",null,"Password"),r.a.createElement(j.a,{type:"text",autoFocus:!0,required:!0,name:"password",value:d,onChange:function(e){var t=e.target.value;p(t)},validations:[I]}),r.a.createElement("p",{className:"errorMsg"}),w&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},w)),r.a.createElement("div",{className:"btnContainer"},r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:S},S?r.a.createElement("span",null," Loading..."):r.a.createElement("span",null,"Sign up")),r.a.createElement("p",null,"Do you have an account ?",r.a.createElement(h.b,{to:"/registerclient"}," Sign in"))),r.a.createElement(C.a,{style:{display:"none"},ref:a}))))},M=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},T=function(e){if(!Object(w.isEmail)(e))return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This is not a valid email.")},A=function(e){if(e.length<6||e.length>40)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The password must be between 6 and 40 characters.")},x=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useState)(""),l=Object(g.a)(a,2),c=l[0],s=l[1],u=Object(n.useState)(""),i=Object(g.a)(u,2),E=i[0],d=i[1],p=Object(n.useState)(""),b=Object(g.a)(p,2),f=b[0],v=b[1],S=Object(n.useState)(!1),y=Object(g.a)(S,2),N=y[0],w=y[1],L=Object(o.c)((function(e){return e.message})).message,I=Object(o.b)();return r.a.createElement("section",{className:"login"},r.a.createElement("div",{className:"loginContainer"},r.a.createElement(O.a,{onSubmit:function(a){a.preventDefault(),w(!1),e.current.validateAll(),0===t.current.context._errors.length&&I(function(e,t,a){return function(n){return m(e,t,a).then((function(e){return n({type:"REGISTER_SUCCESS"}),n({type:"SET_MESSAGE",payload:e.data.message}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return n({type:"REGISTER_FAIL"}),n({type:"SET_MESSAGE",payload:t}),Promise.reject()}))}}(c,E,f)).then((function(){w(!0)})).catch((function(){w(!1)}))},ref:e},r.a.createElement("label",null,"Name"),r.a.createElement(j.a,{type:"text",autoFocus:!0,required:!0,name:"username",value:c,onChange:function(e){var t=e.target.value;s(t)},validations:[M]}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("label",null,"E-mail"),r.a.createElement(j.a,{type:"text",autoFocus:!0,required:!0,name:"email",value:E,onChange:function(e){var t=e.target.value;d(t)},validations:[M,T]}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"text",autoFocus:!0,required:!0,name:"password",value:f,onChange:function(e){var t=e.target.value;v(t)},validations:[M,A]}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("label",null,"DNI"),r.a.createElement("input",{type:"text",autoFocus:!0,required:!0,name:"dni"}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("label",null,"Address"),r.a.createElement("input",{type:"text",autoFocus:!0,required:!0,name:"address"}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("label",null,"Tlf number"),r.a.createElement("input",{type:"text",autoFocus:!0,required:!0,name:"tlf"}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("div",{className:"btnContainer"},r.a.createElement("button",{className:"btn btn-primary btn-block"}," Sign up "),r.a.createElement("p",null,"Do you have an account?",r.a.createElement(h.b,{to:"./login"}," Sign in")),r.a.createElement("p",null,"Do you want to register as a restaurant?",r.a.createElement(h.b,{to:"/registerrestaurant"}," Sign up"))),L&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:N?"alert alert-success":"alert alert-danger",role:"alert"},L)),r.a.createElement(C.a,{style:{display:"none"},ref:t}))))},F=a(29),G=a(9);u.a.create({baseURL:"http://localhost:8080/api",headers:{"Content-type":"application/json"}});var _=function(){var e=Object(n.useState)({name:"",email:"",password:"",address:"",tlf:""}),t=Object(g.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),o=Object(g.a)(c,2),s=o[0],u=(o[1],function(e){var t=e.target,n=t.name,r=t.value;l(Object(G.a)(Object(G.a)({},a),{},Object(F.a)({},n,r))),console.log(a)});return r.a.createElement("section",{className:"login"},s?r.a.createElement("div",{className:"loginContainer"},r.a.createElement("p",null,"Register successful! Welcome ",r.a.createElement("strong",null,a.name)),r.a.createElement(h.b,{to:"/"}," Go to main page")):r.a.createElement("div",{className:"loginContainer"},r.a.createElement("label",null,"Restaurant name"),r.a.createElement("input",{type:"text",autoFocus:!0,required:!0,name:"name",onChange:u}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("label",null,"E-mail"),r.a.createElement("input",{type:"text",autoFocus:!0,required:!0,name:"email",onChange:u}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"text",autoFocus:!0,required:!0,name:"password",onChange:u}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("label",null,"Address"),r.a.createElement("input",{type:"text",autoFocus:!0,required:!0,name:"address",onChange:u}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("label",null,"Tlf number"),r.a.createElement("input",{type:"text",autoFocus:!0,required:!0,name:"tlf",onChange:u}),r.a.createElement("p",{className:"errorMsg"}),r.a.createElement("div",{className:"btnContainer"},r.a.createElement("button",null," Sign up"),r.a.createElement("p",null,"Do you have an account ?",r.a.createElement(h.b,{to:"/login"}," Sign in")),r.a.createElement("p",null,"Do you want to register as a client ?",r.a.createElement(h.b,{to:"/registerclient"}," Sign up")))))},k=a(30);a(174);var q=function(){var e={color:"black"};return r.a.createElement("nav",null,r.a.createElement("li",{className:"nav-links"},r.a.createElement(h.b,{style:e,to:"/"},r.a.createElement("h3",null,"Logo")),r.a.createElement(k.a,null,r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Control,{id:"formLocationNavBar",placeholder:"Enter delivery adress"}))),r.a.createElement(h.b,{stryle:e,to:"/login"},r.a.createElement("h5",null,"Log in"))))},D=function(){Object(o.c)((function(e){return e.auth})).user;var e=Object(o.b)();Object(n.useEffect)((function(){p.listen((function(t){e({type:"CLEAR_MESSAGE"})}))}),[e]);return r.a.createElement(h.a,{history:p},r.a.createElement("div",null,r.a.createElement(q,null),r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/",component:f}),r.a.createElement(v.b,{path:"/login",component:R}),r.a.createElement(v.b,{path:"/registerclient",component:x}),r.a.createElement(v.b,{path:"/registerrestaurant",component:_}))))},P=a(15),U=JSON.parse(localStorage.getItem("user")),B=U?{isLoggedIn:!0,user:U}:{isLoggedIn:!1,user:null},J={},W=Object(P.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"REGISTER_SUCCESS":case"REGISTER_FAIL":return Object(G.a)(Object(G.a)({},e),{},{isLoggedIn:!1});case"LOGIN_SUCCESS":return Object(G.a)(Object(G.a)({},e),{},{isLoggedIn:!0,user:n.user});case"LOGIN_FAIL":case"LOGOUT":return Object(G.a)(Object(G.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_MESSAGE":return{message:n};case"CLEAR_MESSAGE":return{message:""};default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=a(66),$=[a(67).a],z=Object(P.createStore)(W,Object(H.composeWithDevTools)(P.applyMiddleware.apply(void 0,$)));a(176).config();var K=z;c.a.render(r.a.createElement(o.a,{store:K},r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},35:function(e,t,a){},68:function(e,t,a){e.exports=a(179)}},[[68,1,2]]]);
//# sourceMappingURL=main.a1863d8e.chunk.js.map